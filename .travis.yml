 language: java
 jdk:
  - openjdk8

 branches:
  only:
    - master

#Trivis CI 서버의 Home
 cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.gradle'

 before_install:
      - chmod +x gradlew
 script: "./gradlew clean build"

 before_deploy:
   - zip -r kshpart_webservice *
   - mkdir -p deploy
   - mv kshpart_webservice.zip deploy/kshpart_webservice.zip

 deploy:
   - provider: s3
     access_key_id: $AWS_ACCESS_KEY
     secret_access_key: $AWS_SECRET_KEY
     bucket: kshpart-webservice-build
     region: ap-northeast-2
     skip_cleanup: true
     acl: private
     local_dir: deploy
     wait-until-deployed: true

 # CI 실행 완료 시 메일로 알람
 notifications:
  email:
    recipients:
      - go1212gd@naver.com
      - kshpart@gmail.com
